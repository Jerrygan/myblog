# 观察者模式是什么东东

### 小故事开篇

“老师来了，老师来了，大家快坐好”（此处有小破站UP主声音），看着大黄老师往教室走进来，小邱子把PS4放进了抽屉翻开了书本、小欧子三步当两步飞冲到讲台擦黑板，再箭步跑回来座位、小甘子清了清嗓子，“起立，老师好”。啊...peace&love

### 描述

观察者模式（发布订阅模式），定义对象间一种一对多的依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并自动更新。

### 类图

补充

我们来解释一下开篇小故事人物对应观察者模式的几个角色名称

Subject被观察者（老师）

定义被观察者承担的职责：动态管理（添加、取消）观察者，并通知观察者

Oberver观察者（学生）

观察者收到通知消息后，做出响应

ConcreteSubject具体的被观察者（大黄）

实现自己的业务逻辑，此时可以针对哪些业务进行通知

ConcreteObserver具体的观察者（小邱子、小欧子、小甘子）

每个观察者接收到消息做出不同的响应





### 优点

1.被观察者之间、观察者与被观察者之间的业务解耦

### 缺点

被观察者状态更新，以一定的顺序传递消息通知观察者，在观察者比较多的情况下，被观察者的通知发布会花较多的时间，影响效率

### 设计思路点

1.考虑被观察者与观察者之间的消息传输

实现做法：观察者的响应方法接口接受两个参数，一个是观察者，一个是传输消息DTO对象



2.考虑多观察者时候的性能，观察者接收到被观察者的通知消息，怎么才能快速响应？

多线程实现异步

缓存实现同步



3.考虑观察者状态变动，不一定要通知到被观察者



### springboot的实现

监听器









